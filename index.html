<!DOCTYPE html>
<html lang="he">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>מערכת הזנת ציונים לפרויקט רשתות</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.rtl.min.css" rel="stylesheet">
    <style>
        body {
            direction: rtl;
            background-color: #f8f9fa;
            padding: 20px;
        }
        .form-section {
            background-color: #fff;
            padding: 20px;
            border-radius: 15px;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
            margin-bottom: 30px;
        }
        .form-title {
            margin-bottom: 20px;
            border-bottom: 2px solid #dee2e6;
            padding-bottom: 10px;
        }
        input[type="text"], input[type="number"], input[type="date"] {
            font-weight: bold;
            font-size: 1.25rem;
        }
        .mark-display {
            display: inline-block;
            width: 100px;
            height: 100px;
            line-height: 100px;
            text-align: center;
            border-radius: 50%;
            background-color: #d4edda;
            color: #155724;
            font-weight: bold;
            font-size: 32px;
            margin: 10px;
        }
        @media (max-width: 576px) {
            .mark-display {
                width: 70px;
                height: 70px;
                line-height: 70px;
                font-size: 20px;
            }
            input[type="text"], input[type="number"], input[type="date"] {
                font-size: 1.6rem !important;
                height: 3.5rem;
            }
        }
    </style>
</head>
<body>
<div class="container">    
<header class="text-center mb-4">
    <img src="tekshoveM.png" alt="school logo" width="120" class="mb-2">
    <h2 class="fw-bold fs-5 fs-md-3">הערכת פרויקטים ברשתות תקשורת, 5 יח"ל – סמל שאלון: 794589</h2>
</header>

    <div class="form-section">
        <div class="row mb-3">
            <div class="col-md-4">
                <label class="form-label">שם בית הספר:</label>
                <input type="text" class="form-control" id="schoolName">
            </div>
            <div class="col-md-4">
                <label class="form-label">סמל בית הספר:</label>
                <input type="text" class="form-control" id="schoolCode" maxlength="6">
            </div>
            <div class="col-md-4">
                <label class="form-label">תאריך בחינה:</label>
                <input type="date" class="form-control" id="examDate">
            </div>
        </div>

        <h2 class="form-title">פרטי תלמיד</h2>
        <div class="row mb-3">
            <div class="col-md-6">
                <label class="form-label">שם התלמיד:</label>
                <input type="text" class="form-control" id="studentName">
            </div>
            <div class="col-md-6">
                <label class="form-label">ת.ז:</label>
                <input type="text" class="form-control" id="studentId" maxlength="9">
            </div>
        </div>
    </div>

    <div class="form-section">
        <h3 class="form-title">חלק הספר (30%)</h3>
        <div class="row g-3" id="bookInputs">
            <div class="col-md-3"><label class="form-label">מבוא (2 נק')</label><input type="number" class="form-control" id="b1" max="2" min="0"></div>
            <div class="col-md-3"><label class="form-label">תוכן עניינים (2 נק')</label><input type="number" class="form-control" id="b2" max="2" min="0"></div>
            <div class="col-md-3"><label class="form-label">אודות ותרשים (4 נק')</label><input type="number" class="form-control" id="b3" max="4" min="0"></div>
            <div class="col-md-3"><label class="form-label">דרישות מערכת (6 נק')</label><input type="number" class="form-control" id="b4" max="6" min="0"></div>
            <div class="col-md-3"><label class="form-label">טופולוגיה (6 נק')</label><input type="number" class="form-control" id="b5" max="6" min="0"></div>
            <div class="col-md-3"><label class="form-label">תיעוד רכיבים (20 נק')</label><input type="number" class="form-control" id="b6" max="20" min="0"></div>
            <div class="col-md-3"><label class="form-label">הגדרות CLI וכו' (30 נק')</label><input type="number" class="form-control" id="b7" max="30" min="0"></div>
            <div class="col-md-3"><label class="form-label">ניתוב\מטרו\צילומי מסך (20 נק')</label><input type="number" class="form-control" id="b8" max="20" min="0"></div>
            <div class="col-md-3"><label class="form-label">פקודות show ורפלקציה (10 נק')</label><input type="number" class="form-control" id="b9" max="10" min="0"></div>
        </div>
        <div class="mt-3 text-end">
            <span class="fw-bold">סה"כ חלק הספר: </span>
            <span id="bookTotalDisplay" class="mark-display">0</span>
        </div>
    </div>

    <div class="form-section">
        <h3 class="form-title">חלק ההצגה (70%)</h3>
        <div class="row g-3" id="presentationInputs">
            <div class="col-md-3"><label class="form-label">שליטה בפרויקט (5 נק')</label><input type="number" class="form-control" id="p1" max="5" min="0"></div>
            <div class="col-md-3"><label class="form-label">שאלה רמה א (10 נק')</label><input type="number" class="form-control" id="p2" max="10" min="0"></div>
            <div class="col-md-3"><label class="form-label">שאלה רמה א (10 נק')</label><input type="number" class="form-control" id="p3" max="10" min="0"></div>
            <div class="col-md-3"><label class="form-label">שאלה רמה א (10 נק')</label><input type="number" class="form-control" id="p4" max="10" min="0"></div>
            <div class="col-md-3"><label class="form-label">שאלה רמה ב (15 נק')</label><input type="number" class="form-control" id="p5" max="15" min="0"></div>
            <div class="col-md-3"><label class="form-label">שאלה רמה ב (15 נק')</label><input type="number" class="form-control" id="p6" max="15" min="0"></div>
            <div class="col-md-3"><label class="form-label">שאלה רמה ב/ג (15 נק')</label><input type="number" class="form-control" id="p7" max="15" min="0"></div>
            <div class="col-md-3"><label class="form-label">מטלת ביצוע (20 נק')</label><input type="number" class="form-control" id="p8" max="20" min="0"></div>
        </div>
        <div class="mt-3 text-end">
            <span class="fw-bold">סה"כ חלק ההצגה: </span>
            <span id="presentationTotalDisplay" class="mark-display">0</span>
        </div>
    </div>
   <div class="form-section">
    <div class="text-center">
        <button class="btn btn-primary btn-lg" onclick="calculateFinal()">חשב ציון סופי</button>
    </div>

    <div class="text-center mt-4">
        <span class="fw-bold">הציון הסופי:</span>
        <span id="finalDisplay" class="mark-display">0</span>
    </div>

    <div class="text-center mt-4 d-print-block">
        <p class="fw-bold">בית הספר: <span id="schoolNameDisplay"></span></p>
        <p class="fw-bold">סמל בית הספר: <span id="schoolCodeDisplay"></span></p>
        <p class="fw-bold">תאריך הבחינה: <span id="examDateDisplay"></span></p>
    </div>

    <div class="text-center mb-4">
        <button class="btn btn-success mb-3" onclick="window.print()">שמור כ-PDF / הדפס</button>
    </div>
   </div>
 <footer class="text-center mt-5 pt-3 border-top text-muted">
    <p class="mb-0">Nassar Wafik © 2024 - 2025</p>
</footer>      
</div>

<script>
    function sumMarks(ids) {
        return ids.reduce((sum, id) => sum + (parseFloat(document.getElementById(id).value) || 0), 0);
    }

    function clampInputs() {
        const inputs = document.querySelectorAll("input[type='number']");
        inputs.forEach(input => {
            input.addEventListener('input', () => {
                const val = parseFloat(input.value);
                const max = parseFloat(input.max);
                const min = parseFloat(input.min);
                if (val > max) input.value = max;
                if (val < min) input.value = min;
                updateTotals();
            });
        });
    }

    function updateTotals() {
        const bookIds = ["b1", "b2", "b3", "b4", "b5", "b6", "b7", "b8", "b9"];
        const presIds = ["p1", "p2", "p3", "p4", "p5", "p6", "p7", "p8"];
        const bookTotal = sumMarks(bookIds);
        const presTotal = sumMarks(presIds);
        document.getElementById("bookTotalDisplay").textContent = bookTotal;
        document.getElementById("presentationTotalDisplay").textContent = presTotal;
    }

    function calculateFinal() {
        const studentId = document.getElementById("studentId").value;
        if (!/^\d{9}$/.test(studentId)) {
            alert("תעודת זהות חייבת להכיל בדיוק 9 ספרות");
            return;
        }

        const schoolCode = document.getElementById("schoolCode").value;
        if (!/^\d{6}$/.test(schoolCode)) {
            alert("סמל בית הספר חייב להכיל בדיוק 6 ספרות");
            return;
        }

        const allInputs = document.querySelectorAll("input[type='number']");
        for (let input of allInputs) {
            const val = parseFloat(input.value);
            const max = parseFloat(input.max);
            const min = parseFloat(input.min);
            if (val < min || val > max) {
                alert(`הציון בשדה '${input.previousElementSibling.textContent.trim()}' חייב להיות בין ${min} ל-${max}`);
                return;
            }
        }

        const bookIds = ["b1", "b2", "b3", "b4", "b5", "b6", "b7", "b8", "b9"];
        const presIds = ["p1", "p2", "p3", "p4", "p5", "p6", "p7", "p8"];
        const bookTotal = sumMarks(bookIds);
        const presTotal = sumMarks(presIds);
        const finalMark = Math.round(bookTotal * 0.3 + presTotal * 0.7);
        document.getElementById("bookTotalDisplay").textContent = bookTotal;
        document.getElementById("presentationTotalDisplay").textContent = presTotal;
        document.getElementById("finalDisplay").textContent = finalMark;

        // تحديث بيانات المدرسة للطباعة
        document.getElementById("schoolNameDisplay").textContent = document.getElementById("schoolName").value;
        document.getElementById("schoolCodeDisplay").textContent = schoolCode;
        document.getElementById("examDateDisplay").textContent = document.getElementById("examDate").value;
    }

    window.onload = clampInputs;
</script>
 
</body>
</html>
