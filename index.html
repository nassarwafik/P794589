<!DOCTYPE html>
<html lang="he">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>מערכת הזנת ציונים לפרויקט רשתות</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.rtl.min.css" rel="stylesheet">
    <style>
        body {
            direction: rtl;
            background-color: #f8f9fa;
            padding: 20px;
        }
        .form-section {
            background-color: #fff;
            padding: 20px;
            border-radius: 15px;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
            margin-bottom: 30px;
        }
        .form-title {
            margin-bottom: 20px;
            border-bottom: 2px solid #dee2e6;
            padding-bottom: 10px;
        }
        input[type="text"], input[type="number"] {
            font-weight: bold;
        }
        .mark-display {
            display: inline-block;
            width: 80px;
            height: 80px;
            line-height: 80px;
            text-align: center;
            border-radius: 50%;
            background-color: #d4edda;
            color: #155724;
            font-weight: bold;
            font-size: 24px;
            margin: 10px;
        }
        @media (max-width: 576px) {
            .mark-display {
                width: 60px;
                height: 60px;
                line-height: 60px;
                font-size: 18px;
            }
        }
    </style>
</head>
<body>
<div class="container">
    <div class="text-center mb-4">
        <img src="tekshoveM.png" alt="school logo" width="120" class="mb-2">
        <h2 class="fw-bold fs-5 fs-md-3">הערכת פרויקטים ברשתות תקשורת, 5 יח\"ל – סמל שאלון: 79458</h2>
    </div>

    <div class="form-section">
        <h2 class="form-title">פרטי תלמיד</h2>
        <div class="row mb-3">
            <div class="col-md-6">
                <label class="form-label">שם התלמיד:</label>
                <input type="text" class="form-control" id="studentName">
            </div>
            <div class="col-md-6">
                <label class="form-label">ת.ז:</label>
                <input type="text" class="form-control" id="studentId" maxlength="9">
            </div>
        </div>
    </div>

    <div class="form-section">
        <h3 class="form-title">חלק הספר (30%)</h3>
        <div class="row g-3" id="bookInputs">
            <div class="col-md-3"><label class="form-label">מבוא (2)</label><input type="number" class="form-control" id="b1" max="2" min="0"></div>
            <div class="col-md-3"><label class="form-label">תוכן עניינים (2)</label><input type="number" class="form-control" id="b2" max="2" min="0"></div>
            <div class="col-md-3"><label class="form-label">אודות ותרשים (4)</label><input type="number" class="form-control" id="b3" max="4" min="0"></div>
            <div class="col-md-3"><label class="form-label">דרישות מערכת (6)</label><input type="number" class="form-control" id="b4" max="6" min="0"></div>
            <div class="col-md-3"><label class="form-label">טופולוגיה (6)</label><input type="number" class="form-control" id="b5" max="6" min="0"></div>
            <div class="col-md-3"><label class="form-label">תיעוד רכיבים (20)</label><input type="number" class="form-control" id="b6" max="20" min="0"></div>
            <div class="col-md-3"><label class="form-label">הגדרות CLI וכו' (30)</label><input type="number" class="form-control" id="b7" max="30" min="0"></div>
            <div class="col-md-3"><label class="form-label">ניתוב סטטי (20)</label><input type="number" class="form-control" id="b8" max="20" min="0"></div>
            <div class="col-md-3"><label class="form-label">פקודות show ורפלקציה (10)</label><input type="number" class="form-control" id="b9" max="10" min="0"></div>
        </div>
        <div class="mt-3 text-end">
            <span class="fw-bold">סה\"כ חלק הספר: </span>
            <span id="bookTotalDisplay" class="mark-display">0</span>
        </div>
    </div>

    <div class="form-section">
        <h3 class="form-title">חלק ההצגה (70%)</h3>
        <div class="row g-3" id="presentationInputs">
            <div class="col-md-3"><label class="form-label">שליטה בפרויקט (5)</label><input type="number" class="form-control" id="p1" max="5" min="0"></div>
            <div class="col-md-3"><label class="form-label">שאלה רמה א (10)</label><input type="number" class="form-control" id="p2" max="10" min="0"></div>
            <div class="col-md-3"><label class="form-label">שאלה רמה א (10)</label><input type="number" class="form-control" id="p3" max="10" min="0"></div>
            <div class="col-md-3"><label class="form-label">שאלה רמה א (10)</label><input type="number" class="form-control" id="p4" max="10" min="0"></div>
            <div class="col-md-3"><label class="form-label">שאלה רמה ב (15)</label><input type="number" class="form-control" id="p5" max="15" min="0"></div>
            <div class="col-md-3"><label class="form-label">שאלה רמה ב (15)</label><input type="number" class="form-control" id="p6" max="15" min="0"></div>
            <div class="col-md-3"><label class="form-label">שאלה רמה ב/ג (15)</label><input type="number" class="form-control" id="p7" max="15" min="0"></div>
            <div class="col-md-3"><label class="form-label">מטלת ביצוע (20)</label><input type="number" class="form-control" id="p8" max="20" min="0"></div>
        </div>
        <div class="mt-3 text-end">
            <span class="fw-bold">סה\"כ חלק ההצגה: </span>
            <span id="presentationTotalDisplay" class="mark-display">0</span>
        </div>
    </div>

    <div class="text-center">
        <button class="btn btn-primary btn-lg" onclick="calculateFinal()">חשב ציון סופי</button>
    </div>

    <div class="text-center mt-4">
        <span class="fw-bold">הציון הסופי:</span>
        <span id="finalDisplay" class="mark-display">0</span>
    </div>
    <div class="text-center mb-4">
        <button class="btn btn-success mb-3" onclick="window.print()">שמור כ-PDF / הדפס</button>
    </div>
</div>

<script>
    function sumMarks(ids) {
        return ids.reduce((sum, id) => sum + (parseFloat(document.getElementById(id).value) || 0), 0);
    }

    function clampInputs() {
        const inputs = document.querySelectorAll("input[type='number']");
        inputs.forEach(input => {
            input.addEventListener('input', () => {
                const val = parseFloat(input.value);
                const max = parseFloat(input.max);
                const min = parseFloat(input.min);
                if (val > max) input.value = max;
                if (val < min) input.value = min;
                updateTotals();
            });
        });
    }

    function updateTotals() {
        const bookIds = ["b1", "b2", "b3", "b4", "b5", "b6", "b7", "b8", "b9"];
        const presIds = ["p1", "p2", "p3", "p4", "p5", "p6", "p7", "p8"];
        const bookTotal = sumMarks(bookIds);
        const presTotal = sumMarks(presIds);
        document.getElementById("bookTotalDisplay").textContent = bookTotal;
        document.getElementById("presentationTotalDisplay").textContent = presTotal;
    }

    function calculateFinal() {
        const studentId = document.getElementById("studentId").value;
        if (!/^\d{9}$/.test(studentId)) {
            alert("תעודת זהות חייבת להכיל בדיוק 9 ספרות");
            return;
        }

        const allInputs = document.querySelectorAll("input[type='number']");
        for (let input of allInputs) {
            const val = parseFloat(input.value);
            const max = parseFloat(input.max);
            const min = parseFloat(input.min);
            if (val < min || val > max) {
                alert(`הציון בשדה '${input.previousElementSibling.textContent.trim()}' חייב להיות בין ${min} ל-${max}`);
                return;
            }
        }

        const bookIds = ["b1", "b2", "b3", "b4", "b5", "b6", "b7", "b8", "b9"];
        const presIds = ["p1", "p2", "p3", "p4", "p5", "p6", "p7", "p8"];
        const bookTotal = sumMarks(bookIds);
        const presTotal = sumMarks(presIds);
        const finalMark = (bookTotal * 0.3 + presTotal * 0.7).toFixed(2);
        document.getElementById("bookTotalDisplay").textContent = bookTotal;
        document.getElementById("presentationTotalDisplay").textContent = presTotal;
        document.getElementById("finalDisplay").textContent = finalMark;
    }

    window.onload = clampInputs;
</script>
</body>
</html>
